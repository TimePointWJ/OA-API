<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.odm.oa.mapper.GoodsMapper">
  <resultMap id="BaseResultMap" type="com.odm.oa.entity.Goods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    <id column="goods_id" jdbcType="BIGINT" property="goodsId" />
    <result column="goods_type" jdbcType="CHAR" property="goodsType" />
    <result column="goods_name" jdbcType="VARCHAR" property="goodsName" />
    <result column="price" jdbcType="DOUBLE" property="price" />
    <result column="image_url" jdbcType="VARCHAR" property="imageUrl" />
    <result column="count" jdbcType="INTEGER" property="count" />
    <result column="cost" jdbcType="DOUBLE" property="cost" />
    <result column="sale_flg" jdbcType="CHAR" property="saleFlg" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="del_flg" jdbcType="BIT" property="delFlg" />
    <result column="version" jdbcType="INTEGER" property="version" />
    <result column="create_id" jdbcType="VARCHAR" property="createId" />
    <result column="create_time" jdbcType="DATE" property="createTime" />
    <result column="update_id" jdbcType="VARCHAR" property="updateId" />
    <result column="update_time" jdbcType="DATE" property="updateTime" />
  </resultMap>
  
  <resultMap type="com.odm.oa.entity.ex.GoodsEx_WJ" id="BaseResultMaps" extends="BaseResultMap">
       <result column="goodtypes" jdbcType="CHAR" property="goodtypes" />
       <result column="saletypes" jdbcType="CHAR" property="saletypes" />
  </resultMap>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    delete from goods
    where goods_id = #{goodsId,jdbcType=BIGINT}
  </delete>
  <select id="selectRoleList" parameterType="com.odm.oa.model.request.PaginationBase" resultMap="BaseResultMaps">
	 select * from goods  as gs
		left join
		dictionary as dc
		on( dc.code_key = gs.goods_type and
		dc.CODE_TYPE=1000391)
		left join dictionary as dc2
		on (dc2.code_key =
		gs.sale_flg and dc2.CODE_TYPE=1000392)
		<where>
			<if test="goodsType != null and goodsType != ''">
				 gs.goods_type=#{goodsType} AND
			</if>
			<if test="goodsName != null and goodsName != ''">
				gs.goods_name like concat('%',concat(#{goodsName},'%')) AND 
			</if>
			<if test="saleFlg != null and saleFlg != ''">
				gs.sale_flg=#{saleFlg} AND 
			</if>
			gs.del_flg='0'
		</where>			
		order by gs.goods_id
   </select>
  <insert id="insert" parameterType="com.odm.oa.entity.Goods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    insert into goods (goods_id, goods_type, goods_name, 
      price, image_url, count, 
      cost, sale_flg, description, 
      del_flg, version, create_id, 
      create_time, update_id, update_time
      )
    values (#{goodsId,jdbcType=BIGINT}, #{goodsType,jdbcType=CHAR}, #{goodsName,jdbcType=VARCHAR}, 
      #{price,jdbcType=DOUBLE}, #{imageUrl,jdbcType=VARCHAR}, #{count,jdbcType=INTEGER}, 
      #{cost,jdbcType=DOUBLE}, #{saleFlg,jdbcType=CHAR}, #{description,jdbcType=VARCHAR}, 
      #{delFlg,jdbcType=BIT}, #{version,jdbcType=INTEGER}, #{createId,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=DATE}, #{updateId,jdbcType=VARCHAR}, #{updateTime,jdbcType=DATE}
      )
  </insert>
  
 <update id="updateByPrimaryKey" parameterType="com.odm.oa.entity.Goods">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    update goods
    set goods_type = #{goodsType,jdbcType=CHAR},
      goods_name = #{goodsName,jdbcType=VARCHAR},
      price = #{price,jdbcType=DOUBLE},
      image_url = #{imageUrl,jdbcType=VARCHAR},
      count = #{count,jdbcType=INTEGER},
      cost = #{cost,jdbcType=DOUBLE},
      sale_flg = #{saleFlg,jdbcType=CHAR},
      description = #{description,jdbcType=VARCHAR},
      del_flg = #{delFlg,jdbcType=BIT},
      version = #{version,jdbcType=INTEGER},
      create_id = #{createId,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=DATE},
      update_id = #{updateId,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=DATE}
    where goods_id = #{goodsId,jdbcType=BIGINT}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    select goods_id, goods_type, goods_name, price, image_url, count, cost, sale_flg, 
    description, del_flg, version, create_id, create_time, update_id, update_time
    from goods
    where goods_id = #{goodsId,jdbcType=BIGINT}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 10:04:16 CST 2018.
    -->
    select goods_id, goods_type, goods_name, price, image_url, count, cost, sale_flg, 
    description, del_flg, version, create_id, create_time, update_id, update_time
    from goods
  </select>
  <select id="getByName" parameterType="java.lang.String" resultType="int">
    select count(1)
    from POSITION where goods_name = #{name,jdbcType=VARCHAR}
  </select>
  <select id="pagination" parameterType="com.odm.oa.model.request.GoodsPagination_WJ"
		resultMap="BaseResultMaps">
		select
		gs.goods_id,gs.goods_type,gs.goods_name,gs.price,gs.sale_flg,gs.count,gs.version,dc.value
		goods_type_value,dc2.value sale_flg_value
		from
		goods as gs
		left join
		dictionary as dc
		on( dc.code_key = gs.goods_type and
		dc.CODE_TYPE=1000391)
		left join dictionary as dc2
		on (dc2.code_key =
		gs.sale_flg and dc2.CODE_TYPE=1000392)
		<where>
			<if test="goodsType != null and goodsType != ''">
				 gs.goods_type=#{goodsType} AND
			</if>
			<if test="goodsName != null and goodsName != ''">
				gs.goods_name like concat('%',concat(#{goodsName},'%')) AND 
			</if>
			<if test="saleFlg != null and saleFlg != ''">
				gs.sale_flg=#{saleFlg} AND 
			</if>
			gs.del_flg='0'
		</where>			
		order by gs.goods_id
	</select>
<select id="selectByName" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    select *
    from goods
    where goods_name=#{name} and del_flg="0"
  </select>

</mapper>