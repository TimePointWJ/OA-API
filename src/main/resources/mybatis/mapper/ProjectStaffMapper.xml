<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.odm.oa.mapper.ProjectStaffMapper" >
  <resultMap id="BaseResultMap" type="com.odm.oa.entity.ProjectStaff" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="project_id" property="projectId" jdbcType="BIGINT" />
    <result column="staff_id" property="staffId" jdbcType="BIGINT" />
    <result column="responsibility" property="responsibility" jdbcType="VARCHAR" />
    <result column="del_flg" property="delFlg" jdbcType="BIT" />
    <result column="version" property="version" jdbcType="INTEGER" />
    <result column="create_id" property="createId" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="DATE" />
    <result column="update_id" property="updateId" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="DATE" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    delete from project_staff
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.odm.oa.entity.ProjectStaff" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    insert into project_staff (id, project_id, staff_id, 
      responsibility, del_flg, version, 
      create_id, create_time, update_id, 
      update_time)
    values (#{id,jdbcType=BIGINT}, #{projectId,jdbcType=BIGINT}, #{staffId,jdbcType=BIGINT}, 
      #{responsibility,jdbcType=VARCHAR}, #{delFlg,jdbcType=BIT}, #{version,jdbcType=INTEGER}, 
      #{createId,jdbcType=VARCHAR}, #{createTime,jdbcType=DATE}, #{updateId,jdbcType=VARCHAR}, 
      #{updateTime,jdbcType=DATE})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.odm.oa.entity.ProjectStaff" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    update project_staff
    set project_id = #{projectId,jdbcType=BIGINT},
      staff_id = #{staffId,jdbcType=BIGINT},
      responsibility = #{responsibility,jdbcType=VARCHAR},
      del_flg = #{delFlg,jdbcType=BIT},
      version = #{version,jdbcType=INTEGER},
      create_id = #{createId,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=DATE},
      update_id = #{updateId,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=DATE}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    select id, project_id, staff_id, responsibility, del_flg, version, create_id, create_time, 
    update_id, update_time
    from project_staff
    where id = #{id,jdbcType=BIGINT} and del_flg="0"
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Feb 12 15:37:41 CST 2018.
    -->
    select id, project_id, staff_id, responsibility, del_flg, version, create_id, create_time, 
    update_id, update_time
    from project_staff and del_flg="0"
  </select>
  <select id="selectStaffsByProjectId" parameterType="java.lang.Long" resultType="com.odm.oa.entity.ex.ProjectStaffEx">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 27 17:58:41 CST 2018.
    -->
    select ps.id,ps.project_id as projectId,ps.staff_id as staffId,ps.responsibility,ps.version, ps.create_id as createId,
        ps.create_time as createTime, ps.update_id as updateId, ps.update_time as updateTime ,
	st.department_id as departmentId, st.staff_no as staffNo, st.name, st.position_id as positionId, st.mobile_phone as mobilePhone,
     st.password, st.entry_time as entryTime,st.graduation_time as graduationTime, st.graduation_school as graduationSchool, st.education, st.subject,
      st.begin_development_time as beginDevelopmentTime, st.email, st.sex, st.province_id as provinceId, st.city_id as cityId, st.district_id as districtId,
       st.address, st.identity_card as identityCard, st.check_status as checkStatus,st.update_password_flg as updatePasswordFlg,
        st.status,st.remark, ps.del_flg as delFlg,p.position_name as positionName
    from project_staff ps 
    left join staff st on st.id=ps.staff_id and st.del_flg="0"
    left join position p on p.id =st.position_id and p.del_flg="0" 
    where ps.project_id =#{projectId} and ps.del_flg="0"
  </select>
  <select id="selectExByPositionId" parameterType="java.lang.Long" resultType="com.odm.oa.entity.ex.ProjectStaffEx">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 27 17:58:41 CST 2018.
    -->
    select ps.id, s.department_id as departmentId, s.staff_no as staffNo, s.name,
	s.position_id as positionId, s.mobile_phone as mobilePhone, s.password, 
    s.entry_time as entryTime,s.graduation_time as graduationTime,
    s.graduation_school as graduationSchool, s.education, s.subject,
    s.begin_development_time as beginDevelopmentTime, s.email,s.sex, 
    s.province_id as provinceId, s.city_id as cityId, s.district_id as districtId,
    p.area_name as provinceName,c.area_name as cityName,d.area_name as districtName,
    s.address, s.identity_card as identityCard, s.check_status as checkStatus, s.status, 
    s.update_password_flg as updatePasswordFlg,
    s.remark, s.del_flg as delFlg, s.version, s.create_id as createId, 
    s.create_time as createTime, s.update_id as updateId, s.update_time as updateTime
    from project_staff ps 
    left join staff s on ps.staff_id=s.id and s.del_flg="0"
    left join area p on p.id=s.province_id and p.del_flg='0'
    left join area c on c.id=s.city_id and c.del_flg='0'
    left join area d on d.id=s.district_id and d.del_flg='0'
    where s.position_id = #{positionId,jdbcType=BIGINT} and ps.del_flg="0"
  </select>
  <update id="deleteByProjectId" parameterType="java.lang.Long">
  	update project_staff set del_flg="1" where project_id=#{projectId}
  </update>
  <select id="selectById" parameterType="java.lang.Long" resultType="com.odm.oa.entity.ProjectStaff">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 27 17:58:41 CST 2018.
    -->
    select ps.id,ps.project_id as projectId,ps.staff_id as staffId,ps.responsibility,ps.version, ps.create_id as createId,
        ps.create_time as createTime, ps.update_id as updateId, ps.update_time as updateTime ,
	st.department_id as departmentId, st.staff_no as staffNo, st.name, st.position_id as positionId, st.mobile_phone as mobilePhone,
     st.password, st.entry_time as entryTime,st.graduation_time as graduationTime, st.graduation_school as graduationSchool, st.education, st.subject,
      st.begin_development_time as beginDevelopmentTime, st.email, st.sex, st.province_id as provinceId, st.city_id as cityId, st.district_id as districtId,
       st.address, st.identity_card as identityCard, st.check_status as checkStatus,st.update_password_flg as updatePasswordFlg,
        st.status,st.remark, ps.del_flg as delFlg
    from project_staff ps 
    left join staff st on st.id=ps.staff_id and st.del_flg="0"
    where ps.id=#{id} and ps.del_flg="0"
  </select>
</mapper>